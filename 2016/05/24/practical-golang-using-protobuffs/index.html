<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Practical Golang: Using Protobuffs | Jacob Martin</title><meta name=keywords content="binary,client,go,golang,google,JSON,protobuf,protobuffers,protobuffs,protocol buffer,server,transport"><meta name=description content="Introduction Most apps we make need a means of communication. We usually use JSON, or just plain text. JSON has got especially popular because of the rise of Node.js. The truth though, is, that JSON isn’t really a fast format. The marshaller in Go also isn’t that fast. That’s why in this article we’ll learn how to use google protocol buffers. They are in fact very easy to use, and are much faster than JSON."><meta name=author content="Jacob Martin"><link rel=canonical href=https://jacobmartins.com/2016/05/24/practical-golang-using-protobuffs/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://jacobmartins.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jacobmartins.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jacobmartins.com/favicon-32x32.png><link rel=apple-touch-icon href=https://jacobmartins.com/apple-touch-icon.png><link rel=mask-icon href=https://jacobmartins.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-74339391-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Practical Golang: Using Protobuffs"><meta property="og:description" content="Introduction Most apps we make need a means of communication. We usually use JSON, or just plain text. JSON has got especially popular because of the rise of Node.js. The truth though, is, that JSON isn’t really a fast format. The marshaller in Go also isn’t that fast. That’s why in this article we’ll learn how to use google protocol buffers. They are in fact very easy to use, and are much faster than JSON."><meta property="og:type" content="article"><meta property="og:url" content="https://jacobmartins.com/2016/05/24/practical-golang-using-protobuffs/"><meta property="og:image" content="https://jacobmartins.com/images/avatar.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-05-24T11:44:26+00:00"><meta property="article:modified_time" content="2016-05-24T11:44:26+00:00"><meta property="og:site_name" content="Jacob Martin"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jacobmartins.com/images/avatar.jpg"><meta name=twitter:title content="Practical Golang: Using Protobuffs"><meta name=twitter:description content="Introduction Most apps we make need a means of communication. We usually use JSON, or just plain text. JSON has got especially popular because of the rise of Node.js. The truth though, is, that JSON isn’t really a fast format. The marshaller in Go also isn’t that fast. That’s why in this article we’ll learn how to use google protocol buffers. They are in fact very easy to use, and are much faster than JSON."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jacobmartins.com/posts/"},{"@type":"ListItem","position":2,"name":"Practical Golang: Using Protobuffs","item":"https://jacobmartins.com/2016/05/24/practical-golang-using-protobuffs/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Practical Golang: Using Protobuffs","name":"Practical Golang: Using Protobuffs","description":"Introduction Most apps we make need a means of communication. We usually use JSON, or just plain text. JSON has got especially popular because of the rise of Node.js. The truth though, is, that JSON isn’t really a fast format. The marshaller in Go also isn’t that fast. That’s why in this article we’ll learn how to use google protocol buffers. They are in fact very easy to use, and are much faster than JSON.","keywords":["binary","client","go","golang","google","JSON","protobuf","protobuffers","protobuffs","protocol buffer","server","transport"],"articleBody":"Introduction Most apps we make need a means of communication. We usually use JSON, or just plain text. JSON has got especially popular because of the rise of Node.js. The truth though, is, that JSON isn’t really a fast format. The marshaller in Go also isn’t that fast. That’s why in this article we’ll learn how to use google protocol buffers. They are in fact very easy to use, and are much faster than JSON.\nRegarding the performance gains, here they are, according to this benchmark:\nbenchmark iter time/iter bytes alloc allocs BenchmarkJsonMarshal-8 500000 3714 ns/op 1232 B/op 10 allocs/op BenchmarkJsonUnmarshal-8 500000 4125 ns/op 416 B/op 7 allocs/op BenchmarkProtobufMarshal-8 1000000 1554 ns/op 200 B/op 7 allocs/op BenchmarkProtobufUnmarshal-8 1000000 1055 ns/op 192 B/op 10 allocs/op BenchmarkGogoprotobufMarshal-8 10000000 211 ns/op 64 B/op 1 allocs/op BenchmarkGogoprotobufUnmarshal-8 5000000 289 ns/op 96 B/op 3 allocs/op Ok, now let’s set up the environment.\nSetup First we’ll need to get the protobuffer compiler binaries from here:\nhttps://github.com/google/protobuf/releases/tag/v3.0.0-beta-3\nUnpack them somewhere in your PATH.\nThe next step is to get the golang plugin. Make sure that GOPATH/bin is in your PATH.\ngo get -u github.com/golang/protobuf/protoc-gen-go Writing .proto files Now it’s time to define our structure we’ll use. I’ll create mine in my project root. I’ll call it clientStructure.proto.\nFirst we need to define the version of protobuffers we will use. Here we will use the newest – proto3. We’ll also define the package of the file. This will also be our go package name of the generated file.\nsyntax = \"proto3\"; package main; Ok, now we’ll define our main structure in the file. The Client structure:\nmessage Client { } Now it’s time to define the available fields. Fields are refered to by id, so for each field we define the type, name and id like this:\ntype name = id; We’ll start with our first 4 fields of our client:\nmessage Client { int32 id = 1; string name = 2; string email = 3; string country = 4; } We will also define an inner structure Mail:\nstring country = 4; message Mail { string remoteEmail = 1; string body = 2; } and finally define the inbox field. It’s an array of mails, which we create using the repeated keyword:\nmessage Mail { string remoteEmail = 1; string body = 2; } repeated Mail inbox = 5; } Now let’s compile it!\nOpen the directory with the protofile, and launch:\nprotoc --go_out=. clientStructure.proto This will create a generated GO file with our Client structure.\nMy file looks like this:\n// Code generated by protoc-gen-go. // source: clientStructure.proto // DO NOT EDIT! /* Package main is a generated protocol buffer package. It is generated from these files: clientStructure.proto It has these top-level messages: Client */ package main import proto \"github.com/golang/protobuf/proto\" import fmt \"fmt\" import math \"math\" // Reference imports to suppress errors if they are not otherwise used. var _ = proto.Marshal var _ = fmt.Errorf var _ = math.Inf // This is a compile-time assertion to ensure that this generated file // is compatible with the proto package it is being compiled against. const _ = proto.ProtoPackageIsVersion1 type Client struct { Id int32 `protobuf:\"varint,1,opt,name=id\" json:\"id,omitempty\"` Name string `protobuf:\"bytes,2,opt,name=name\" json:\"name,omitempty\"` Email string `protobuf:\"bytes,3,opt,name=email\" json:\"email,omitempty\"` Country string `protobuf:\"bytes,4,opt,name=country\" json:\"country,omitempty\"` Inbox []*Client_Mail `protobuf:\"bytes,5,rep,name=inbox\" json:\"inbox,omitempty\"` } func (m *Client) Reset() { *m = Client{} } func (m *Client) String() string { return proto.CompactTextString(m) } func (*Client) ProtoMessage() {} func (*Client) Descriptor() ([]byte, []int) { return fileDescriptor0, []int{0} } func (m *Client) GetInbox() []*Client_Mail { if m != nil { return m.Inbox } return nil } type Client_Mail struct { RemoteEmail string `protobuf:\"bytes,1,opt,name=remoteEmail\" json:\"remoteEmail,omitempty\"` Body string `protobuf:\"bytes,2,opt,name=body\" json:\"body,omitempty\"` } func (m *Client_Mail) Reset() { *m = Client_Mail{} } func (m *Client_Mail) String() string { return proto.CompactTextString(m) } func (*Client_Mail) ProtoMessage() {} func (*Client_Mail) Descriptor() ([]byte, []int) { return fileDescriptor0, []int{0, 0} } func init() { proto.RegisterType((*Client)(nil), \"main.Client\") proto.RegisterType((*Client_Mail)(nil), \"main.Client.Mail\") } var fileDescriptor0 = []byte{ // 191 bytes of a gzipped FileDescriptorProto 0x1f, 0x8b, 0x08, 0x00, 0x00, 0x09, 0x6e, 0x88, 0x02, 0xff, 0xe2, 0x12, 0x4d, 0xce, 0xc9, 0x4c, 0xcd, 0x2b, 0x09, 0x2e, 0x29, 0x2a, 0x4d, 0x2e, 0x29, 0x2d, 0x4a, 0xd5, 0x2b, 0x28, 0xca, 0x2f, 0xc9, 0x17, 0x62, 0xc9, 0x4d, 0xcc, 0xcc, 0x53, 0x3a, 0xcc, 0xc8, 0xc5, 0xe6, 0x0c, 0x96, 0x17, 0xe2, 0xe3, 0x62, 0xca, 0x4c, 0x91, 0x60, 0x54, 0x60, 0xd4, 0x60, 0x0d, 0x02, 0xb2, 0x84, 0x84, 0xb8, 0x58, 0xf2, 0x12, 0x73, 0x53, 0x25, 0x98, 0x80, 0x22, 0x9c, 0x41, 0x60, 0xb6, 0x90, 0x08, 0x17, 0x6b, 0x2a, 0x50, 0x5f, 0x8e, 0x04, 0x33, 0x58, 0x10, 0xc2, 0x11, 0x92, 0xe0, 0x62, 0x4f, 0xce, 0x2f, 0xcd, 0x2b, 0x29, 0xaa, 0x94, 0x60, 0x01, 0x8b, 0xc3, 0xb8, 0x42, 0xea, 0x5c, 0xac, 0x99, 0x79, 0x49, 0xf9, 0x15, 0x12, 0xac, 0x0a, 0xcc, 0x1a, 0xdc, 0x46, 0x82, 0x7a, 0x20, 0x4b, 0xf5, 0x20, 0x16, 0xea, 0xf9, 0x02, 0xf5, 0x06, 0x41, 0xe4, 0xa5, 0x6c, 0xb8, 0x58, 0x40, 0x5c, 0x21, 0x05, 0x2e, 0xee, 0xa2, 0xd4, 0xdc, 0xfc, 0x92, 0x54, 0x57, 0xb0, 0x35, 0x8c, 0x60, 0xe3, 0x90, 0x85, 0x40, 0xce, 0x4a, 0xca, 0x4f, 0xa9, 0x84, 0x39, 0x0b, 0xc4, 0x4e, 0x62, 0x03, 0x7b, 0xc9, 0x18, 0x10, 0x00, 0x00, 0xff, 0xff, 0xfd, 0x42, 0x16, 0x7b, 0xeb, 0x00, 0x00, 0x00, } Using Protocol Buffers in Go The Server Let’s first create the server. We will just receive a protobuf in a POST body, and print the contents.\nFirst the basic structure and the imports:\npackage main import ( \"github.com/golang/protobuf/proto\" \"net/http\" \"fmt\" \"io/ioutil\" ) func main() { http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { }) http.ListenAndServe(\":3000\", nil) } So, let’s start with a Client structure to fill, and read the body.\nhttp.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { myClient := Client{} data, err := ioutil.ReadAll(r.Body) if err != nil { fmt.Println(err) } }) We’ll unmarshall the data, passing in a reference to the Client to fill in, and check for errors.\nif err != nil { fmt.Println(err) } if err := proto.Unmarshal(data, \u0026myClient); err != nil { fmt.Println(err) } and finally print it all\nif err := proto.Unmarshal(data, \u0026myClient); err != nil { fmt.Println(err) } println(myClient.Id, \":\", myClient.Name, \":\", myClient.Email, \":\", myClient.Country) for _, mail := range myClient.Inbox { fmt.Println(mail.RemoteEmail, \":\", mail.Body) } }) Now let’s start with…\nThe Client The Client will just fill in the Client structure, and send it to the server.\nThe structure:\npackage main import ( \"github.com/golang/protobuf/proto\" \"net/http\" \"fmt\" \"bytes\" ) func main() { } We create the Client structure and fill it in. For the purposes of this article we’ll use, the oh so creatively named, John Doe.\nfunc main() { myClient := Client{Id: 526, Name: \"John Doe\", Email: \"johndoe@example.com\", Country: \"US\"} clientInbox := make([]*Client_Mail, 0, 20) clientInbox = append(clientInbox, \u0026Client_Mail{RemoteEmail: \"jannetdoe@example.com\", Body: \"Hello. Greetings. Bye.\"}, \u0026Client_Mail{RemoteEmail: \"WilburDoe@example.com\", Body: \"Bye, Greetings, hello.\"}) myClient.Inbox = clientInbox } We’ll marshall the John (the Client) into raw data and finally send him to the server.\nmyClient.Inbox = clientInbox data, err := proto.Marshal(\u0026myClient) if err != nil { fmt.Println(err) return } _, err = http.Post(\"http://localhost:3000\", \"\", bytes.NewBuffer(data)) if err != nil { fmt.Println(err) return } } Note that we used bytes.NewBuffer, so our raw data satisfies the Reader requirement for the request body.\nConclusion As you can see, protobuffs are really easy to use and provide an actual speed boost in your application. Hope you’ll try to use them instead of JSON or other forms of transport in your next project. You can get more information about the more advanced functionalities here: https://developers.google.com/protocol-buffers/docs/gotutorial\nHappy coding!\n","wordCount":"1226","inLanguage":"en","datePublished":"2016-05-24T11:44:26Z","dateModified":"2016-05-24T11:44:26Z","author":{"@type":"Person","name":"Jacob Martin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://jacobmartins.com/2016/05/24/practical-golang-using-protobuffs/"},"publisher":{"@type":"Organization","name":"Jacob Martin","logo":{"@type":"ImageObject","url":"https://jacobmartins.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jacobmartins.com/ accesskey=h title="Jacob Martin (Alt + H)">Jacob Martin</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jacobmartins.com/ title="About Me"><span>About Me</span></a></li><li><a href=https://jacobmartins.com/archive title=Archive><span>Archive</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://jacobmartins.com/>Home</a>&nbsp;»&nbsp;<a href=https://jacobmartins.com/posts/>Posts</a></div><h1 class=post-title>Practical Golang: Using Protobuffs</h1><div class=post-meta><span title='2016-05-24 11:44:26 +0000 UTC'>May 24, 2016</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Jacob Martin&nbsp;|&nbsp;<a href=https://github.com/cube2222/cube2222.github.io/content/posts/2016-05-24-practical-golang-using-protobuffs.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Most apps we make need a means of communication. We usually use <em>JSON</em>, or just plain text. <em>JSON</em> has got especially popular because of the rise of <em>Node.js</em>. The truth though, is, that JSON isn’t really a fast format. The marshaller in Go also isn’t that fast. That’s why in this article we’ll learn how to use <a href=https://github.com/google/protobuf>google protocol buffers</a>. They are in fact very easy to use, and are much faster than JSON.</p><p>Regarding the performance gains, here they are, according to <a href=https://github.com/alecthomas/go_serialization_benchmarks>this benchmark</a>:</p><table><thead><tr><th>benchmark</th><th>iter</th><th>time/iter</th><th>bytes alloc</th><th>allocs</th></tr></thead><tbody><tr><td>BenchmarkJsonMarshal-8</td><td>500000</td><td>3714 ns/op</td><td>1232 B/op</td><td>10 allocs/op</td></tr><tr><td>BenchmarkJsonUnmarshal-8</td><td>500000</td><td>4125 ns/op</td><td>416 B/op</td><td>7 allocs/op</td></tr><tr><td>BenchmarkProtobufMarshal-8</td><td>1000000</td><td>1554 ns/op</td><td>200 B/op</td><td>7 allocs/op</td></tr><tr><td>BenchmarkProtobufUnmarshal-8</td><td>1000000</td><td>1055 ns/op</td><td>192 B/op</td><td>10 allocs/op</td></tr><tr><td>BenchmarkGogoprotobufMarshal-8</td><td>10000000</td><td>211 ns/op</td><td>64 B/op</td><td>1 allocs/op</td></tr><tr><td>BenchmarkGogoprotobufUnmarshal-8</td><td>5000000</td><td>289 ns/op</td><td>96 B/op</td><td>3 allocs/op</td></tr></tbody></table><p>Ok, now let’s set up the environment.</p><h2 id=setup>Setup<a hidden class=anchor aria-hidden=true href=#setup>#</a></h2><p>First we’ll need to get the <em>protobuffer compiler</em> binaries from here:<br><a href=https://github.com/google/protobuf/releases/tag/v3.0.0-beta-3>https://github.com/google/protobuf/releases/tag/v3.0.0-beta-3</a><br>Unpack them somewhere in your <strong>PATH</strong>.</p><p>The next step is to get the golang plugin. Make sure that <strong>GOPATH</strong>/bin is in your <strong>PATH</strong>.</p><pre><code>go get -u github.com/golang/protobuf/protoc-gen-go
</code></pre><h2 id=writing-proto-files>Writing .proto files<a hidden class=anchor aria-hidden=true href=#writing-proto-files>#</a></h2><p>Now it’s time to define our structure we’ll use. I’ll create mine in my project root. I’ll call it <em>clientStructure.proto</em>.</p><p>First we need to define the version of <em>protobuffers</em> we will use. Here we will use the newest – <strong>proto3</strong>. We’ll also define the package of the file. This will also be our go package name of the generated file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span>syntax <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;proto3&#34;</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#f92672>package</span> main;<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>Ok, now we’ll define our main structure in the file. The <em>Client</em> structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>Client</span> {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>Now it’s time to define the available fields. Fields are refered to by id, so for each field we define the type, name and id like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span>type name <span style=color:#f92672>=</span> id;<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>We’ll start with our first 4 fields of our client:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>Client</span> {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#66d9ef>int32</span> id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#66d9ef>string</span> name <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#66d9ef>string</span> email <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#66d9ef>string</span> country <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>We will also define an inner structure <em>Mail</em>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span>        <span style=color:#66d9ef>string</span> country <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#66d9ef>message</span> <span style=color:#a6e22e>Mail</span> {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>                <span style=color:#66d9ef>string</span> remoteEmail <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>                <span style=color:#66d9ef>string</span> body <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>        }<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>and finally define the inbox field. It’s an array of mails, which we create using the <em>repeated</em> keyword:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span>        <span style=color:#66d9ef>message</span> <span style=color:#a6e22e>Mail</span> {<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>                <span style=color:#66d9ef>string</span> remoteEmail <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>                <span style=color:#66d9ef>string</span> body <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>        }<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#66d9ef>repeated</span> Mail inbox <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><hr><p>Now let’s compile it!<br>Open the directory with the protofile, and launch:</p><pre><code>protoc --go_out=. clientStructure.proto
</code></pre><p>This will create a generated <strong>GO</strong> file with our <em>Client</em> structure.</p><p>My file looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// Code generated by protoc-gen-go.
</span></span></span><span style=display:flex><span><span style=color:#75715e>// source: clientStructure.proto
</span></span></span><span style=display:flex><span><span style=color:#75715e>// DO NOT EDIT!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>Package main is a generated protocol buffer package.
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>It is generated from these files:
</span></span></span><span style=display:flex><span><span style=color:#75715e>    clientStructure.proto
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>It has these top-level messages:
</span></span></span><span style=display:flex><span><span style=color:#75715e>    Client
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#a6e22e>proto</span> <span style=color:#e6db74>&#34;github.com/golang/protobuf/proto&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#a6e22e>fmt</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#a6e22e>math</span> <span style=color:#e6db74>&#34;math&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Reference imports to suppress errors if they are not otherwise used.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>proto</span>.<span style=color:#a6e22e>Marshal</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>Inf</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This is a compile-time assertion to ensure that this generated file
</span></span></span><span style=display:flex><span><span style=color:#75715e>// is compatible with the proto package it is being compiled against.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>proto</span>.<span style=color:#a6e22e>ProtoPackageIsVersion1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Client</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Id</span>          <span style=color:#66d9ef>int32</span>                   <span style=color:#e6db74>`protobuf:&#34;varint,1,opt,name=id&#34; json:&#34;id,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Name</span>        <span style=color:#66d9ef>string</span>               <span style=color:#e6db74>`protobuf:&#34;bytes,2,opt,name=name&#34; json:&#34;name,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Email</span>    <span style=color:#66d9ef>string</span>              <span style=color:#e6db74>`protobuf:&#34;bytes,3,opt,name=email&#34; json:&#34;email,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Country</span> <span style=color:#66d9ef>string</span>               <span style=color:#e6db74>`protobuf:&#34;bytes,4,opt,name=country&#34; json:&#34;country,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Inbox</span>    []<span style=color:#f92672>*</span><span style=color:#a6e22e>Client_Mail</span> <span style=color:#e6db74>`protobuf:&#34;bytes,5,rep,name=inbox&#34; json:&#34;inbox,omitempty&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>m</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Client</span>) <span style=color:#a6e22e>Reset</span>()                                        { <span style=color:#f92672>*</span><span style=color:#a6e22e>m</span> = <span style=color:#a6e22e>Client</span>{} }
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>m</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Client</span>) <span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span>                        { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>proto</span>.<span style=color:#a6e22e>CompactTextString</span>(<span style=color:#a6e22e>m</span>) }
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#f92672>*</span><span style=color:#a6e22e>Client</span>) <span style=color:#a6e22e>ProtoMessage</span>()                            {}
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#f92672>*</span><span style=color:#a6e22e>Client</span>) <span style=color:#a6e22e>Descriptor</span>() ([]<span style=color:#66d9ef>byte</span>, []<span style=color:#66d9ef>int</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fileDescriptor0</span>, []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>0</span>} }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>m</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Client</span>) <span style=color:#a6e22e>GetInbox</span>() []<span style=color:#f92672>*</span><span style=color:#a6e22e>Client_Mail</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>m</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>m</span>.<span style=color:#a6e22e>Inbox</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Client_Mail</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>RemoteEmail</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`protobuf:&#34;bytes,1,opt,name=remoteEmail&#34; json:&#34;remoteEmail,omitempty&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Body</span>                <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`protobuf:&#34;bytes,2,opt,name=body&#34; json:&#34;body,omitempty&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>m</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Client_Mail</span>) <span style=color:#a6e22e>Reset</span>()                                       { <span style=color:#f92672>*</span><span style=color:#a6e22e>m</span> = <span style=color:#a6e22e>Client_Mail</span>{} }
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>m</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Client_Mail</span>) <span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span>                       { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>proto</span>.<span style=color:#a6e22e>CompactTextString</span>(<span style=color:#a6e22e>m</span>) }
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#f92672>*</span><span style=color:#a6e22e>Client_Mail</span>) <span style=color:#a6e22e>ProtoMessage</span>()                           {}
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#f92672>*</span><span style=color:#a6e22e>Client_Mail</span>) <span style=color:#a6e22e>Descriptor</span>() ([]<span style=color:#66d9ef>byte</span>, []<span style=color:#66d9ef>int</span>) { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fileDescriptor0</span>, []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>} }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>init</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>proto</span>.<span style=color:#a6e22e>RegisterType</span>((<span style=color:#f92672>*</span><span style=color:#a6e22e>Client</span>)(<span style=color:#66d9ef>nil</span>), <span style=color:#e6db74>&#34;main.Client&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>proto</span>.<span style=color:#a6e22e>RegisterType</span>((<span style=color:#f92672>*</span><span style=color:#a6e22e>Client_Mail</span>)(<span style=color:#66d9ef>nil</span>), <span style=color:#e6db74>&#34;main.Client.Mail&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>fileDescriptor0</span> = []<span style=color:#66d9ef>byte</span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 191 bytes of a gzipped FileDescriptorProto
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#ae81ff>0x1f</span>, <span style=color:#ae81ff>0x8b</span>, <span style=color:#ae81ff>0x08</span>, <span style=color:#ae81ff>0x00</span>, <span style=color:#ae81ff>0x00</span>, <span style=color:#ae81ff>0x09</span>, <span style=color:#ae81ff>0x6e</span>, <span style=color:#ae81ff>0x88</span>, <span style=color:#ae81ff>0x02</span>, <span style=color:#ae81ff>0xff</span>, <span style=color:#ae81ff>0xe2</span>, <span style=color:#ae81ff>0x12</span>, <span style=color:#ae81ff>0x4d</span>, <span style=color:#ae81ff>0xce</span>, <span style=color:#ae81ff>0xc9</span>, <span style=color:#ae81ff>0x4c</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0xcd</span>, <span style=color:#ae81ff>0x2b</span>, <span style=color:#ae81ff>0x09</span>, <span style=color:#ae81ff>0x2e</span>, <span style=color:#ae81ff>0x29</span>, <span style=color:#ae81ff>0x2a</span>, <span style=color:#ae81ff>0x4d</span>, <span style=color:#ae81ff>0x2e</span>, <span style=color:#ae81ff>0x29</span>, <span style=color:#ae81ff>0x2d</span>, <span style=color:#ae81ff>0x4a</span>, <span style=color:#ae81ff>0xd5</span>, <span style=color:#ae81ff>0x2b</span>, <span style=color:#ae81ff>0x28</span>, <span style=color:#ae81ff>0xca</span>, <span style=color:#ae81ff>0x2f</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0xc9</span>, <span style=color:#ae81ff>0x17</span>, <span style=color:#ae81ff>0x62</span>, <span style=color:#ae81ff>0xc9</span>, <span style=color:#ae81ff>0x4d</span>, <span style=color:#ae81ff>0xcc</span>, <span style=color:#ae81ff>0xcc</span>, <span style=color:#ae81ff>0x53</span>, <span style=color:#ae81ff>0x3a</span>, <span style=color:#ae81ff>0xcc</span>, <span style=color:#ae81ff>0xc8</span>, <span style=color:#ae81ff>0xc5</span>, <span style=color:#ae81ff>0xe6</span>, <span style=color:#ae81ff>0x0c</span>, <span style=color:#ae81ff>0x96</span>, <span style=color:#ae81ff>0x17</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0xe2</span>, <span style=color:#ae81ff>0xe3</span>, <span style=color:#ae81ff>0x62</span>, <span style=color:#ae81ff>0xca</span>, <span style=color:#ae81ff>0x4c</span>, <span style=color:#ae81ff>0x91</span>, <span style=color:#ae81ff>0x60</span>, <span style=color:#ae81ff>0x54</span>, <span style=color:#ae81ff>0x60</span>, <span style=color:#ae81ff>0xd4</span>, <span style=color:#ae81ff>0x60</span>, <span style=color:#ae81ff>0x0d</span>, <span style=color:#ae81ff>0x02</span>, <span style=color:#ae81ff>0xb2</span>, <span style=color:#ae81ff>0x84</span>, <span style=color:#ae81ff>0x84</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0xb8</span>, <span style=color:#ae81ff>0x58</span>, <span style=color:#ae81ff>0xf2</span>, <span style=color:#ae81ff>0x12</span>, <span style=color:#ae81ff>0x73</span>, <span style=color:#ae81ff>0x53</span>, <span style=color:#ae81ff>0x25</span>, <span style=color:#ae81ff>0x98</span>, <span style=color:#ae81ff>0x80</span>, <span style=color:#ae81ff>0x22</span>, <span style=color:#ae81ff>0x9c</span>, <span style=color:#ae81ff>0x41</span>, <span style=color:#ae81ff>0x60</span>, <span style=color:#ae81ff>0xb6</span>, <span style=color:#ae81ff>0x90</span>, <span style=color:#ae81ff>0x08</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0x17</span>, <span style=color:#ae81ff>0x6b</span>, <span style=color:#ae81ff>0x2a</span>, <span style=color:#ae81ff>0x50</span>, <span style=color:#ae81ff>0x5f</span>, <span style=color:#ae81ff>0x8e</span>, <span style=color:#ae81ff>0x04</span>, <span style=color:#ae81ff>0x33</span>, <span style=color:#ae81ff>0x58</span>, <span style=color:#ae81ff>0x10</span>, <span style=color:#ae81ff>0xc2</span>, <span style=color:#ae81ff>0x11</span>, <span style=color:#ae81ff>0x92</span>, <span style=color:#ae81ff>0xe0</span>, <span style=color:#ae81ff>0x62</span>, <span style=color:#ae81ff>0x4f</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0xce</span>, <span style=color:#ae81ff>0x2f</span>, <span style=color:#ae81ff>0xcd</span>, <span style=color:#ae81ff>0x2b</span>, <span style=color:#ae81ff>0x29</span>, <span style=color:#ae81ff>0xaa</span>, <span style=color:#ae81ff>0x94</span>, <span style=color:#ae81ff>0x60</span>, <span style=color:#ae81ff>0x01</span>, <span style=color:#ae81ff>0x8b</span>, <span style=color:#ae81ff>0xc3</span>, <span style=color:#ae81ff>0xb8</span>, <span style=color:#ae81ff>0x42</span>, <span style=color:#ae81ff>0xea</span>, <span style=color:#ae81ff>0x5c</span>, <span style=color:#ae81ff>0xac</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0x99</span>, <span style=color:#ae81ff>0x79</span>, <span style=color:#ae81ff>0x49</span>, <span style=color:#ae81ff>0xf9</span>, <span style=color:#ae81ff>0x15</span>, <span style=color:#ae81ff>0x12</span>, <span style=color:#ae81ff>0xac</span>, <span style=color:#ae81ff>0x0a</span>, <span style=color:#ae81ff>0xcc</span>, <span style=color:#ae81ff>0x1a</span>, <span style=color:#ae81ff>0xdc</span>, <span style=color:#ae81ff>0x46</span>, <span style=color:#ae81ff>0x82</span>, <span style=color:#ae81ff>0x7a</span>, <span style=color:#ae81ff>0x20</span>, <span style=color:#ae81ff>0x4b</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0xf5</span>, <span style=color:#ae81ff>0x20</span>, <span style=color:#ae81ff>0x16</span>, <span style=color:#ae81ff>0xea</span>, <span style=color:#ae81ff>0xf9</span>, <span style=color:#ae81ff>0x02</span>, <span style=color:#ae81ff>0xf5</span>, <span style=color:#ae81ff>0x06</span>, <span style=color:#ae81ff>0x41</span>, <span style=color:#ae81ff>0xe4</span>, <span style=color:#ae81ff>0xa5</span>, <span style=color:#ae81ff>0x6c</span>, <span style=color:#ae81ff>0xb8</span>, <span style=color:#ae81ff>0x58</span>, <span style=color:#ae81ff>0x40</span>, <span style=color:#ae81ff>0x5c</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0x21</span>, <span style=color:#ae81ff>0x05</span>, <span style=color:#ae81ff>0x2e</span>, <span style=color:#ae81ff>0xee</span>, <span style=color:#ae81ff>0xa2</span>, <span style=color:#ae81ff>0xd4</span>, <span style=color:#ae81ff>0xdc</span>, <span style=color:#ae81ff>0xfc</span>, <span style=color:#ae81ff>0x92</span>, <span style=color:#ae81ff>0x54</span>, <span style=color:#ae81ff>0x57</span>, <span style=color:#ae81ff>0xb0</span>, <span style=color:#ae81ff>0x35</span>, <span style=color:#ae81ff>0x8c</span>, <span style=color:#ae81ff>0x60</span>, <span style=color:#ae81ff>0xe3</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0x90</span>, <span style=color:#ae81ff>0x85</span>, <span style=color:#ae81ff>0x40</span>, <span style=color:#ae81ff>0xce</span>, <span style=color:#ae81ff>0x4a</span>, <span style=color:#ae81ff>0xca</span>, <span style=color:#ae81ff>0x4f</span>, <span style=color:#ae81ff>0xa9</span>, <span style=color:#ae81ff>0x84</span>, <span style=color:#ae81ff>0x39</span>, <span style=color:#ae81ff>0x0b</span>, <span style=color:#ae81ff>0xc4</span>, <span style=color:#ae81ff>0x4e</span>, <span style=color:#ae81ff>0x62</span>, <span style=color:#ae81ff>0x03</span>, <span style=color:#ae81ff>0x7b</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>0xc9</span>, <span style=color:#ae81ff>0x18</span>, <span style=color:#ae81ff>0x10</span>, <span style=color:#ae81ff>0x00</span>, <span style=color:#ae81ff>0x00</span>, <span style=color:#ae81ff>0xff</span>, <span style=color:#ae81ff>0xff</span>, <span style=color:#ae81ff>0xfd</span>, <span style=color:#ae81ff>0x42</span>, <span style=color:#ae81ff>0x16</span>, <span style=color:#ae81ff>0x7b</span>, <span style=color:#ae81ff>0xeb</span>, <span style=color:#ae81ff>0x00</span>, <span style=color:#ae81ff>0x00</span>, <span style=color:#ae81ff>0x00</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=using-protocol-buffers-in-go>Using Protocol Buffers in Go<a hidden class=anchor aria-hidden=true href=#using-protocol-buffers-in-go>#</a></h2><h3 id=the-server>The Server<a hidden class=anchor aria-hidden=true href=#the-server>#</a></h3><p>Let’s first create the server. We will just receive a protobuf in a <strong>POST</strong> body, and print the contents.</p><p>First the basic structure and the imports:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/golang/protobuf/proto&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;io/ioutil&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:3000&#34;</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>So, let’s start with a <em>Client</em> structure to fill, and read the <em>body</em>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myClient</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Client</span>{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>data</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ioutil</span>.<span style=color:#a6e22e>ReadAll</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Body</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    })
</span></span></code></pre></div><p>We’ll <em>unmarshall</em> the data, passing in a <em>reference</em> to the <em>Client</em> to fill in, and check for errors.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>proto</span>.<span style=color:#a6e22e>Unmarshal</span>(<span style=color:#a6e22e>data</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>myClient</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>        }
</span></span></code></pre></div><p>and finally print it all</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>proto</span>.<span style=color:#a6e22e>Unmarshal</span>(<span style=color:#a6e22e>data</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>myClient</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        println(<span style=color:#a6e22e>myClient</span>.<span style=color:#a6e22e>Id</span>, <span style=color:#e6db74>&#34;:&#34;</span>, <span style=color:#a6e22e>myClient</span>.<span style=color:#a6e22e>Name</span>, <span style=color:#e6db74>&#34;:&#34;</span>, <span style=color:#a6e22e>myClient</span>.<span style=color:#a6e22e>Email</span>, <span style=color:#e6db74>&#34;:&#34;</span>, <span style=color:#a6e22e>myClient</span>.<span style=color:#a6e22e>Country</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>mail</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>myClient</span>.<span style=color:#a6e22e>Inbox</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>mail</span>.<span style=color:#a6e22e>RemoteEmail</span>, <span style=color:#e6db74>&#34;:&#34;</span>, <span style=color:#a6e22e>mail</span>.<span style=color:#a6e22e>Body</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    })
</span></span></code></pre></div><p>Now let’s start with…</p><h2 id=the-client>The Client<a hidden class=anchor aria-hidden=true href=#the-client>#</a></h2><p>The Client will just fill in the <em>Client</em> structure, and send it to the server.</p><p>The structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/golang/protobuf/proto&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;bytes&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We create the <em>Client</em> structure and fill it in. For the purposes of this article we’ll use, the oh so creatively named, John Doe.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myClient</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Client</span>{<span style=color:#a6e22e>Id</span>: <span style=color:#ae81ff>526</span>, <span style=color:#a6e22e>Name</span>: <span style=color:#e6db74>&#34;John Doe&#34;</span>, <span style=color:#a6e22e>Email</span>: <span style=color:#e6db74>&#34;johndoe@example.com&#34;</span>, <span style=color:#a6e22e>Country</span>: <span style=color:#e6db74>&#34;US&#34;</span>}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>clientInbox</span> <span style=color:#f92672>:=</span> make([]<span style=color:#f92672>*</span><span style=color:#a6e22e>Client_Mail</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>20</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>clientInbox</span> = append(<span style=color:#a6e22e>clientInbox</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Client_Mail</span>{<span style=color:#a6e22e>RemoteEmail</span>: <span style=color:#e6db74>&#34;jannetdoe@example.com&#34;</span>, <span style=color:#a6e22e>Body</span>: <span style=color:#e6db74>&#34;Hello. Greetings. Bye.&#34;</span>},
</span></span><span style=display:flex><span>        <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Client_Mail</span>{<span style=color:#a6e22e>RemoteEmail</span>: <span style=color:#e6db74>&#34;WilburDoe@example.com&#34;</span>, <span style=color:#a6e22e>Body</span>: <span style=color:#e6db74>&#34;Bye, Greetings, hello.&#34;</span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myClient</span>.<span style=color:#a6e22e>Inbox</span> = <span style=color:#a6e22e>clientInbox</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We’ll <em>marshall</em> the John (the <em>Client</em>) into raw data and finally send him to the server.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>    <span style=color:#a6e22e>myClient</span>.<span style=color:#a6e22e>Inbox</span> = <span style=color:#a6e22e>clientInbox</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>data</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>proto</span>.<span style=color:#a6e22e>Marshal</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>myClient</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Post</span>(<span style=color:#e6db74>&#34;http://localhost:3000&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#a6e22e>bytes</span>.<span style=color:#a6e22e>NewBuffer</span>(<span style=color:#a6e22e>data</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Note that we used bytes.NewBuffer, so our raw data satisfies the <em>Reader</em> requirement for the request body.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>As you can see, protobuffs are really easy to use and provide an actual speed boost in your application. Hope you’ll try to use them instead of JSON or other forms of transport in your next project. You can get more information about the more advanced functionalities here: <a href=https://developers.google.com/protocol-buffers/docs/gotutorial>https://developers.google.com/protocol-buffers/docs/gotutorial</a></p><p>Happy coding!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://jacobmartins.com/tags/binary/>binary</a></li><li><a href=https://jacobmartins.com/tags/client/>client</a></li><li><a href=https://jacobmartins.com/tags/go/>go</a></li><li><a href=https://jacobmartins.com/tags/golang/>golang</a></li><li><a href=https://jacobmartins.com/tags/google/>google</a></li><li><a href=https://jacobmartins.com/tags/json/>JSON</a></li><li><a href=https://jacobmartins.com/tags/protobuf/>protobuf</a></li><li><a href=https://jacobmartins.com/tags/protobuffers/>protobuffers</a></li><li><a href=https://jacobmartins.com/tags/protobuffs/>protobuffs</a></li><li><a href=https://jacobmartins.com/tags/protocol-buffer/>protocol buffer</a></li><li><a href=https://jacobmartins.com/tags/server/>server</a></li><li><a href=https://jacobmartins.com/tags/transport/>transport</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Practical Golang: Using Protobuffs on twitter" href="https://twitter.com/intent/tweet/?text=Practical%20Golang%3a%20Using%20Protobuffs&url=https%3a%2f%2fjacobmartins.com%2f2016%2f05%2f24%2fpractical-golang-using-protobuffs%2f&hashtags=binary%2cclient%2cgo%2cgolang%2cgoogle%2cJSON%2cprotobuf%2cprotobuffers%2cprotobuffs%2cprotocolbuffer%2cserver%2ctransport"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Practical Golang: Using Protobuffs on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjacobmartins.com%2f2016%2f05%2f24%2fpractical-golang-using-protobuffs%2f&title=Practical%20Golang%3a%20Using%20Protobuffs&summary=Practical%20Golang%3a%20Using%20Protobuffs&source=https%3a%2f%2fjacobmartins.com%2f2016%2f05%2f24%2fpractical-golang-using-protobuffs%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Practical Golang: Using Protobuffs on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjacobmartins.com%2f2016%2f05%2f24%2fpractical-golang-using-protobuffs%2f&title=Practical%20Golang%3a%20Using%20Protobuffs"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Practical Golang: Using Protobuffs on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjacobmartins.com%2f2016%2f05%2f24%2fpractical-golang-using-protobuffs%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Practical Golang: Using Protobuffs on whatsapp" href="https://api.whatsapp.com/send?text=Practical%20Golang%3a%20Using%20Protobuffs%20-%20https%3a%2f%2fjacobmartins.com%2f2016%2f05%2f24%2fpractical-golang-using-protobuffs%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Practical Golang: Using Protobuffs on telegram" href="https://telegram.me/share/url?text=Practical%20Golang%3a%20Using%20Protobuffs&url=https%3a%2f%2fjacobmartins.com%2f2016%2f05%2f24%2fpractical-golang-using-protobuffs%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://jacobmartins.com/>Jacob Martin</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>